/*! For license information please see photos-src_views_Tags_vue.js.LICENSE.txt */
"use strict";(self.webpackChunkphotos=self.webpackChunkphotos||[]).push([["src_views_Tags_vue"],{15444:(n,t,e)=>{e.d(t,{Z:()=>s});var r=e(87537),i=e.n(r),o=e(23645),a=e.n(o)()(i());a.push([n.id,"@media(min-width: 0px)and (max-width: 400px){.grid-container[data-v-4ad62046]{padding:0px 8px 256px 8px}}@media(min-width: 400px)and (max-width: 700px){.grid-container[data-v-4ad62046]{padding:0px 8px 256px 8px}}@media(min-width: 700px)and (max-width: 1024px){.grid-container[data-v-4ad62046]{padding:0px 44px 256px 44px}}@media(min-width: 1024px)and (max-width: 1280px){.grid-container[data-v-4ad62046]{padding:0px 44px 256px 44px}}@media(min-width: 1280px)and (max-width: 1440px){.grid-container[data-v-4ad62046]{padding:0px 66px 256px 66px}}@media(min-width: 1440px)and (max-width: 1600px){.grid-container[data-v-4ad62046]{padding:0px 66px 256px 66px}}@media(min-width: 1600px)and (max-width: 2048px){.grid-container[data-v-4ad62046]{padding:0px 66px 256px 66px}}@media(min-width: 2048px)and (max-width: 2560px){.grid-container[data-v-4ad62046]{padding:0px 88px 256px 88px}}@media(min-width: 2560px)and (max-width: 3440px){.grid-container[data-v-4ad62046]{padding:0px 88px 256px 88px}}@media(min-width: 3440px){.grid-container[data-v-4ad62046]{padding:0px 88px 256px 88px}}","",{version:3,sources:["webpack://./src/mixins/GridSizes.scss","webpack://./src/views/Tags.vue"],names:[],mappings:"AAoCG,6CC4NH,iCAEE,yBAAA,CAAA,CD9NC,+CC4NH,iCAEE,yBAAA,CAAA,CD9NC,gDC4NH,iCAEE,2BAAA,CAAA,CD9NC,iDC4NH,iCAEE,2BAAA,CAAA,CD9NC,iDC4NH,iCAEE,2BAAA,CAAA,CD9NC,iDC4NH,iCAEE,2BAAA,CAAA,CD9NC,iDC4NH,iCAEE,2BAAA,CAAA,CD9NC,iDC4NH,iCAEE,2BAAA,CAAA,CD9NC,iDC4NH,iCAEE,2BAAA,CAAA,CDlOC,0BCgOH,iCAEE,2BAAA,CAAA",sourcesContent:["/**\n * @copyright Copyright (c) 2019 John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @author John Molakvoæ <skjnldsv@protonmail.com>\n *\n * @license AGPL-3.0-or-later\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Affero General Public License as\n * published by the Free Software Foundation, either version 3 of the\n * License, or (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n * GNU Affero General Public License for more details.\n *\n * You should have received a copy of the GNU Affero General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n *\n */\n@use 'sass:map';\n\n@mixin grid-sizes() {\n\t$previous: 0;\n\n\t@each $size, $config in $sizes {\n\t\t$count: map.get($config, 'count');\n\t\t$marginTop: map.get($config, 'marginTop');\n\t\t$marginW: map.get($config, 'marginW');\n\n\t\t@if $size == 'max' {\n\t\t\t@media (min-width: #{$previous}px) {\n\t\t\t\t@content($marginTop, $marginW);\n\t\t\t}\n\t\t} @else {\n\t\t\t@media (min-width: #{$previous}px) and (max-width: #{$size}px) {\n\t\t\t\t@content($marginTop, $marginW);\n\t\t\t}\n\t\t}\n\t\t$previous: $size;\n\t}\n}\n",'$sizes: ("400": ("count": 3, "marginTop": 66, "marginW": 8), "700": ("count": 4, "marginTop": 66, "marginW": 8), "1024": ("count": 5, "marginTop": 66, "marginW": 44), "1280": ("count": 4, "marginTop": 66, "marginW": 44), "1440": ("count": 5, "marginTop": 88, "marginW": 66), "1600": ("count": 6, "marginTop": 88, "marginW": 66), "2048": ("count": 7, "marginTop": 88, "marginW": 66), "2560": ("count": 8, "marginTop": 88, "marginW": 88), "3440": ("count": 9, "marginTop": 88, "marginW": 88), "max": ("count": 10, "marginTop": 88, "marginW": 88));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n@import \'../mixins/GridSizes\';\n\n.grid-container {\n\t@include grid-sizes using ($marginTop, $marginW) {\n\t\tpadding: 0px #{$marginW}px 256px #{$marginW}px;\n\t}\n}\n'],sourceRoot:""}]);const s=a},7016:(n,t,e)=>{e.r(t),e.d(t,{default:()=>Q});var r=e(20629),i=e(29837),o=e(81067),a=e(94236);function s(n,t,e,r,i,o,a){try{var s=n[o](a),c=s.value}catch(n){return void e(n)}s.done?t(c):Promise.resolve(c).then(r,i)}function c(n){return function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(n){s(o,r,i,a,c,"next",n)}function c(n){s(o,r,i,a,c,"throw",n)}a(void 0)}))}}function u(n){return p.apply(this,arguments)}function p(){return p=c(regeneratorRuntime.mark((function n(t){var e,r,i=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=i.length>1&&void 0!==i[1]?i[1]:{},n.next=3,o.Z.getDirectoryContents("/systemtags/",Object.assign({},{data:'<?xml version="1.0"?>\n\t\t\t<d:propfind  xmlns:d="DAV:"\n\t\t\t\txmlns:oc="http://owncloud.org/ns">\n\t\t\t\t<d:prop>\n\t\t\t\t\t<oc:id />\n\t\t\t\t\t<oc:display-name />\n\t\t\t\t\t<oc:user-visible />\n\t\t\t\t\t<oc:user-assignable />\n\t\t\t\t\t<oc:can-assign />\n\t\t\t\t</d:prop>\n\t\t\t</d:propfind>',details:!0},e));case 3:return r=n.sent,n.abrupt("return",r.data.map((function(n){return(0,a.AX)(n)})));case 5:case"end":return n.stop()}}),n)}))),p.apply(this,arguments)}var d=e(45994),l=e(2161),m=e(3301);function g(n,t,e,r,i,o,a){try{var s=n[o](a),c=s.value}catch(n){return void e(n)}s.done?t(c):Promise.resolve(c).then(r,i)}function f(n){return function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(n){g(o,r,i,a,s,"next",n)}function s(n){g(o,r,i,a,s,"throw",n)}a(void 0)}))}}function h(n){return v.apply(this,arguments)}function v(){return v=f(regeneratorRuntime.mark((function n(t){var e,r,i,s=arguments;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=s.length>1&&void 0!==s[1]?s[1]:{},e=Object.assign({method:"REPORT",data:'<?xml version="1.0"?>\n\t\t\t<oc:filter-files\n\t\t\t\txmlns:d="DAV:"\n\t\t\t\txmlns:oc="http://owncloud.org/ns"\n\t\t\t\txmlns:nc="http://nextcloud.org/ns"\n\t\t\t\txmlns:ocs="http://open-collaboration-services.org/ns">\n\t\t\t\t<d:prop>\n\t\t\t\t\t'.concat(l.N,"\n\t\t\t\t</d:prop>\n\t\t\t\t<oc:filter-rules>\n\t\t\t\t\t<oc:systemtag>").concat(t,"</oc:systemtag>\n\t\t\t\t</oc:filter-rules>\n\t\t\t</oc:filter-files>"),details:!0},e),r="/files/".concat((0,d.ts)().uid),n.next=5,o.Z.getDirectoryContents(r,e);case 5:return i=n.sent,n.abrupt("return",i.data.map((function(n){return(0,a.AX)(n)})).filter((function(n){return n.mime&&-1!==m.ZP.indexOf(n.mime)})).map((function(n){return Object.assign({},n,{filename:n.filename.replace(r,"")})})));case 7:case"end":return n.stop()}}),n)}))),v.apply(this,arguments)}var x=e(66533),A=e(88318),w=e(69363),C=e(25108);function y(n,t,e,r,i,o,a){try{var s=n[o](a),c=s.value}catch(n){return void e(n)}s.done?t(c):Promise.resolve(c).then(r,i)}function b(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function O(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?b(Object(e),!0).forEach((function(t){j(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):b(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function j(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}const P={name:"Tag",components:{FolderTagPreview:A.Z},mixins:[w.Z],inheritAttrs:!1,props:{item:{type:Object,required:!0}},computed:O(O({},(0,r.Se)(["files","tags"])),{},{folderContent:function(){return this.tags[this.item.injected.id].files},fileList:function(){var n=this;return this.folderContent?this.folderContent.map((function(t){return n.files[t]})).filter((function(n){return!!n})).slice(0,4):[]}}),created:function(){var n,t=this;return(n=regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,h(t.item.injected.id,{signal:t.abortController.signal});case 3:e=n.sent,t.$store.dispatch("updateTag",{id:t.item.injected.id,files:e}),t.$store.dispatch("appendFiles",e),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),n.t0.response&&n.t0.response.status&&C.error("Failed to get folder content",t.item.injected.id,n.t0.response);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})),function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(n){y(o,r,i,a,s,"next",n)}function s(n){y(o,r,i,a,s,"throw",n)}a(void 0)}))})()}};var T=e(51900);const E=(0,T.Z)(P,(function(){var n=this,t=n.$createElement;return(n._self._c||t)("FolderTagPreview",{attrs:{id:n.item.injected.id,icon:"icon-tag",name:n.item.injected.displayName,path:n.item.injected.displayName,"file-list":n.fileList}})}),[],!1,null,null,null).exports;var N=e(53932),$=e(82390),R=e(85324),k=e(25108);function D(n,t,e,r,i,o,a){try{var s=n[o](a),c=s.value}catch(n){return void e(n)}s.done?t(c):Promise.resolve(c).then(r,i)}function S(n){return function(){var t=this,e=arguments;return new Promise((function(r,i){var o=n.apply(t,e);function a(n){D(o,r,i,a,s,"next",n)}function s(n){D(o,r,i,a,s,"throw",n)}a(void 0)}))}}function W(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function Z(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?W(Object(e),!0).forEach((function(t){L(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):W(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function L(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}const I={name:"Tags",components:{VirtualGrid:i.Z,EmptyContent:x.Z,Navigation:$.Z},mixins:[R.Z,w.Z],props:{rootTitle:{type:String,required:!0},path:{type:String,default:""},isRoot:{type:Boolean,default:!0}},data:function(){return{error:null,loading:!1}},computed:Z(Z({},(0,r.Se)(["files","tags","tagsNames"])),{},{tagId:function(){return this.$store.getters.tagId(this.path)},tag:function(){return this.tags[this.tagId]},tagsList:function(){var n=this;return Object.values(this.tagsNames).map((function(t){return n.tags[t]}))},fileList:function(){var n=this;return this.tag&&this.tag.files.map((function(t){return n.files[t]})).filter((function(n){return!!n}))},contentList:function(){var n=this;return this.isRoot?this.tagsList.flatMap((function(n){return""===n.id?[]:[{id:"tag-".concat(n.id),injected:Z({},n),width:256,height:256,columnSpan:1,renderComponent:E}]})):this.fileList.map((function(t){return{id:"file-".concat(t.fileid),injected:Z(Z({},t),{},{list:n.fileList}),width:256,height:256,columnSpan:1,renderComponent:N.Z}}))},isEmpty:function(){return this.isRoot?0===Object.keys(this.tagsNames).length:0===this.fileList.length}}),watch:{path:function(){var n=this;return S(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.tagId){t.next=3;break}return t.next=3,n.fetchRootContent();case 3:n.isRoot||n.fetchContent();case 4:case"end":return t.stop()}}),t)})))()}},beforeMount:function(){var n=this;return S(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.tagId){t.next=3;break}return t.next=3,n.fetchRootContent();case 3:n.isRoot||n.fetchContent();case 4:case"end":return t.stop()}}),t)})))()},methods:{fetchRootContent:function(){var n=this;return S(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return OCA.Viewer.close(),n.tags[n.tagId]||(n.loading=!0),n.error=null,t.prev=3,t.next=6,u("",{signal:n.abortController.signal});case 6:e=t.sent,n.$store.dispatch("updateTags",e),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(3),k.error(t.t0),n.error=!0;case 14:return t.prev=14,n.loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[3,10,14,17]])})))()},fetchContent:function(){var n=this;return S(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return OCA.Viewer.close(),n.tags[n.tagId]||(n.loading=!0),n.error=null,t.prev=3,t.next=6,h(n.tagId,{signal:n.abortController.signal});case 6:e=t.sent,n.$store.dispatch("updateTag",{id:n.tagId,files:e}),n.$store.dispatch("appendFiles",e),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),k.error(t.t0),n.error=!0;case 15:return t.prev=15,n.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})))()}}};var _=e(93379),B=e.n(_),G=e(7795),H=e.n(G),z=e(90569),F=e.n(z),U=e(3565),V=e.n(U),M=e(19216),Y=e.n(M),q=e(44589),J=e.n(q),X=e(15444),K={};K.styleTagTransform=J(),K.setAttributes=V(),K.insert=F().bind(null,"head"),K.domAPI=H(),K.insertStyleElement=Y();B()(X.Z,K);X.Z&&X.Z.locals&&X.Z.locals;const Q=(0,T.Z)(I,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return n.error?e("EmptyContent",[n._v("\n\t"+n._s(n.t("photos","An error occurred"))+"\n")]):n.loading?n._e():e("div",[e("Navigation",{key:"navigation",attrs:{basename:n.path,filename:"/"+n.path,"root-title":n.rootTitle}}),n._v(" "),n.isEmpty?e("EmptyContent",{key:"emptycontent",attrs:{"illustration-name":"empty"},scopedSlots:n._u([{key:"desc",fn:function(){return[n._v("\n\t\t\t"+n._s(n.t("photos","Photos with tags will show up here"))+"\n\t\t")]},proxy:!0}],null,!1,4132175345)},[n._v("\n\t\t"+n._s(n.t("photos","No tags yet"))+"\n\t\t")]):e("div",{staticClass:"grid-container"},[e("VirtualGrid",{ref:"virtualgrid",attrs:{items:n.contentList,"get-column-count":function(){return n.gridConfig.count},"get-grid-gap":function(){return n.gridConfig.gap}}})],1)],1)}),[],!1,null,"4ad62046",null).exports}}]);
//# sourceMappingURL=photos-src_views_Tags_vue.js.map?v=bacfd957a81bea803d93