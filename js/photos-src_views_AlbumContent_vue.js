"use strict";(self.webpackChunkphotos=self.webpackChunkphotos||[]).push([["src_views_AlbumContent_vue","src_assets_Illustrations_folder_svg"],{28300:(n,t,e)=>{e.d(t,{Z:()=>l});var i=e(87537),r=e.n(i),a=e(23645),o=e.n(a)()(r());o.push([n.id,".file-picker[data-v-088313cd]{display:flex;flex-direction:column;padding:12px}.file-picker__content[data-v-088313cd]{display:flex;align-items:flex-start;flex-grow:1;height:500px}.file-picker__navigation[data-v-088313cd]{flex-basis:200px;overflow:scroll;margin-right:8px;padding-right:8px;height:100%}.file-picker__navigation--loading[data-v-088313cd]{background:var(--color-primary-light);border-radius:16px}.file-picker__navigation__month[data-v-088313cd]{font-weight:bold;font-size:16px;border-radius:48px;padding:8px 16px;margin:4px 0;cursor:pointer}.file-picker__navigation__month[data-v-088313cd]:hover{background:var(--color-background-dark)}.file-picker__navigation__month.selected[data-v-088313cd]{background:var(--color-primary-element-lighter)}.file-picker__file-list[data-v-088313cd]{flex-grow:1;min-width:0;height:100%}.file-picker__file-list--loading[data-v-088313cd]{background:var(--color-primary-light);border-radius:16px}.file-picker__file-list .section-header[data-v-088313cd]{font-weight:bold;font-size:20px;padding:8px 0 4px 0}.file-picker__actions[data-v-088313cd]{display:flex;justify-content:space-between;justify-items:center;padding-top:16px}","",{version:3,sources:["webpack://./src/components/FilesPicker.vue"],names:[],mappings:"AAsKA,8BACC,YAAA,CACA,qBAAA,CACA,YAAA,CAEA,uCACC,YAAA,CACA,sBAAA,CACA,WAAA,CACA,YAAA,CAGD,0CACC,gBAAA,CACA,eAAA,CACA,gBAAA,CACA,iBAAA,CACA,WAAA,CAEA,mDACC,qCAAA,CACA,kBAAA,CAGD,iDACC,gBAAA,CACA,cAAA,CACA,kBAAA,CACA,gBAAA,CACA,YAAA,CACA,cAAA,CAEA,uDACC,uCAAA,CAGD,0DACC,+CAAA,CAKH,yCACC,WAAA,CACA,WAAA,CACA,WAAA,CAEA,kDACC,qCAAA,CACA,kBAAA,CAGD,yDACC,gBAAA,CACA,cAAA,CACA,mBAAA,CAIF,uCACC,YAAA,CACA,6BAAA,CACA,oBAAA,CACA,gBAAA",sourcesContent:['$sizes: ("400": ("count": 3, "marginTop": 66, "marginW": 8), "700": ("count": 4, "marginTop": 66, "marginW": 8), "1024": ("count": 5, "marginTop": 66, "marginW": 44), "1280": ("count": 4, "marginTop": 66, "marginW": 44), "1440": ("count": 5, "marginTop": 88, "marginW": 66), "1600": ("count": 6, "marginTop": 88, "marginW": 66), "2048": ("count": 7, "marginTop": 88, "marginW": 66), "2560": ("count": 8, "marginTop": 88, "marginW": 88), "3440": ("count": 9, "marginTop": 88, "marginW": 88), "max": ("count": 10, "marginTop": 88, "marginW": 88));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.file-picker {\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: 12px;\n\n\t&__content {\n\t\tdisplay: flex;\n\t\talign-items: flex-start;\n\t\tflex-grow: 1;\n\t\theight: 500px;\n\t}\n\n\t&__navigation {\n\t\tflex-basis: 200px;\n\t\toverflow: scroll;\n\t\tmargin-right: 8px;\n\t\tpadding-right: 8px;\n\t\theight: 100%;\n\n\t\t&--loading {\n\t\t\tbackground: var(--color-primary-light);\n\t\t\tborder-radius: 16px;\n\t\t}\n\n\t\t&__month {\n\t\t\tfont-weight: bold;\n\t\t\tfont-size: 16px;\n\t\t\tborder-radius: 48px;\n\t\t\tpadding: 8px 16px;\n\t\t\tmargin: 4px 0;\n\t\t\tcursor: pointer;\n\n\t\t\t&:hover {\n\t\t\t\tbackground: var(--color-background-dark);\n\t\t\t}\n\n\t\t\t&.selected {\n\t\t\t\tbackground: var(--color-primary-element-lighter);\n\t\t\t}\n\t\t}\n\t}\n\n\t&__file-list {\n\t\tflex-grow: 1;\n\t\tmin-width: 0;\n\t\theight: 100%;\n\n\t\t&--loading {\n\t\t\tbackground: var(--color-primary-light);\n\t\t\tborder-radius: 16px;\n\t\t}\n\n\t\t.section-header {\n\t\t\tfont-weight: bold;\n\t\t\tfont-size: 20px;\n\t\t\tpadding: 8px 0 4px 0;\n\t\t}\n\t}\n\n\t&__actions {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\tjustify-items: center;\n\t\tpadding-top: 16px;\n\t}\n}\n'],sourceRoot:""}]);const l=o},22112:(n,t,e)=>{e.d(t,{Z:()=>l});var i=e(87537),r=e.n(i),a=e(23645),o=e.n(a)()(r());o.push([n.id,".album[data-v-bda52398]{display:flex;flex-direction:column;padding:8px 64px}.album__empty[data-v-bda52398]{display:flex;flex-direction:column;align-items:center}.album__empty__button[data-v-bda52398]{margin-top:32px}.album__header[data-v-bda52398]{display:flex;min-height:60px;align-items:center;justify-content:space-between;position:-webkit-sticky;position:sticky;top:var(--header-height);z-index:3;background:var(--color-main-background)}.album__header__left[data-v-bda52398]{height:100%;display:flex;align-items:center}.album__header__title .album-location[data-v-bda52398]{margin-left:-4px;display:flex;color:var(--color-text-lighter)}.album__header__actions[data-v-bda52398]{display:flex;align-items:center}.album__header__actions button[data-v-bda52398]{margin-left:16px}.album__photos[data-v-bda52398]{margin-top:16px;height:100%;min-height:0}.empty-content-with-illustration[data-v-bda52398]  .empty-content__icon{width:200px;height:200px}.empty-content-with-illustration[data-v-bda52398]  .empty-content__icon svg{width:200px;height:200px}","",{version:3,sources:["webpack://./src/views/AlbumContent.vue"],names:[],mappings:"AA+cA,wBACC,YAAA,CACA,qBAAA,CACA,gBAAA,CAEA,+BACC,YAAA,CACA,qBAAA,CACA,kBAAA,CAEA,uCACC,eAAA,CAKF,gCACC,YAAA,CACA,eAAA,CACA,kBAAA,CACA,6BAAA,CACA,uBAAA,CAAA,eAAA,CACA,wBAAA,CACA,SAAA,CACA,uCAAA,CAEA,sCACC,WAAA,CACA,YAAA,CACA,kBAAA,CAIA,uDACC,gBAAA,CACA,YAAA,CACA,+BAAA,CAIF,yCACC,YAAA,CACA,kBAAA,CAEA,gDACC,gBAAA,CAKH,gCACC,eAAA,CACA,WAAA,CACA,YAAA,CAIF,wEACC,WAAA,CACA,YAAA,CAEA,4EACC,WAAA,CACA,YAAA",sourcesContent:['$sizes: ("400": ("count": 3, "marginTop": 66, "marginW": 8), "700": ("count": 4, "marginTop": 66, "marginW": 8), "1024": ("count": 5, "marginTop": 66, "marginW": 44), "1280": ("count": 4, "marginTop": 66, "marginW": 44), "1440": ("count": 5, "marginTop": 88, "marginW": 66), "1600": ("count": 6, "marginTop": 88, "marginW": 66), "2048": ("count": 7, "marginTop": 88, "marginW": 66), "2560": ("count": 8, "marginTop": 88, "marginW": 88), "3440": ("count": 9, "marginTop": 88, "marginW": 88), "max": ("count": 10, "marginTop": 88, "marginW": 88));\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.album {\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: 8px 64px;\n\n\t&__empty {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\n\t\t&__button {\n\t\t\tmargin-top: 32px;\n\t\t}\n\n\t}\n\n\t&__header {\n\t\tdisplay: flex;\n\t\tmin-height: 60px;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tposition: sticky;\n\t\ttop: var(--header-height);\n\t\tz-index: 3;\n\t\tbackground: var(--color-main-background);\n\n\t\t&__left {\n\t\t\theight: 100%;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t}\n\n\t\t&__title {\n\t\t\t.album-location {\n\t\t\t\tmargin-left: -4px;\n\t\t\t\tdisplay: flex;\n\t\t\t\tcolor: var(--color-text-lighter);\n\t\t\t}\n\t\t}\n\n\t\t&__actions {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\n\t\t\tbutton {\n\t\t\t\tmargin-left: 16px;\n\t\t\t}\n\t\t}\n\t}\n\n\t&__photos {\n\t\tmargin-top: 16px;\n\t\theight: 100%;\n\t\tmin-height: 0; // Prevent it from overflowing in a flex context.\n\t}\n}\n\n.empty-content-with-illustration ::v-deep .empty-content__icon {\n\twidth: 200px;\n\theight: 200px;\n\n\tsvg {\n\t\twidth: 200px;\n\t\theight: 200px;\n\t}\n}\n'],sourceRoot:""}]);const l=o},23190:(n,t,e)=>{e.r(t),e.d(t,{default:()=>fn});var i=e(20629),r=e(31209),a=e(59466),o=e(50461);const l={name:"ImagePlusIcon",props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var s=e(51900);const c=(0,s.Z)(l,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("span",n._b({staticClass:"material-design-icon image-plus-icon",attrs:{"aria-hidden":!n.title,"aria-label":n.title,role:"img"},on:{click:function(t){return n.$emit("click",t)}}},"span",n.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:n.fillColor,width:n.size,height:n.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M5,3A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H14.09C14.03,20.67 14,20.34 14,20C14,19.32 14.12,18.64 14.35,18H5L8.5,13.5L11,16.5L14.5,12L16.73,14.97C17.7,14.34 18.84,14 20,14C20.34,14 20.67,14.03 21,14.09V5C21,3.89 20.1,3 19,3H5M19,16V19H16V21H19V24H21V21H24V19H21V16H19Z"}},[n.title?e("title",[n._v(n._s(n.title))]):n._e()])])])}),[],!1,null,null,null).exports;const u={name:"AlertCircleIcon",props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};const d=(0,s.Z)(u,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("span",n._b({staticClass:"material-design-icon alert-circle-icon",attrs:{"aria-hidden":!n.title,"aria-label":n.title,role:"img"},on:{click:function(t){return n.$emit("click",t)}}},"span",n.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:n.fillColor,width:n.size,height:n.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"}},[n.title?e("title",[n._v(n._s(n.title))]):n._e()])])])}),[],!1,null,null,null).exports;var f=e(46405),p=e(78039),m=e(84796);const A={name:"DownloadMultipleIcon",props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};const h=(0,s.Z)(A,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("span",n._b({staticClass:"material-design-icon download-multiple-icon",attrs:{"aria-hidden":!n.title,"aria-label":n.title,role:"img"},on:{click:function(t){return n.$emit("click",t)}}},"span",n.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:n.fillColor,width:n.size,height:n.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M9,1V7H5L12,14L19,7H15V1H9M5,16V18H19V16H5M5,20V22H19V20H5Z"}},[n.title?e("title",[n._v(n._s(n.title))]):n._e()])])])}),[],!1,null,null,null).exports;var g=e(33476),b=e(22200),C=e(12945),v=e(66951),_=e(98171),x=e(42408),y=e(26668),w=e(8702);const k={name:"UploadIcon",props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};const F=(0,s.Z)(k,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("span",n._b({staticClass:"material-design-icon upload-icon",attrs:{"aria-hidden":!n.title,"aria-label":n.title,role:"img"},on:{click:function(t){return n.$emit("click",t)}}},"span",n.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:n.fillColor,width:n.size,height:n.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z"}},[n.title?e("title",[n._v(n._s(n.title))]):n._e()])])])}),[],!1,null,null,null).exports;var S=e(80351),B=e.n(S),M=e(28391);function P(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,i)}return e}function Z(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}const E={name:"FilesPicker",components:{ImagePlus:c,Upload:F,Button:g.Button,FilesListViewer:x.Z,File:y.Z},filters:{dateMonthAndYear:function(n){return B()(n,"YYYYMM").format("MMMM YYYY")}},mixins:[v.Z,M.Z,_.Z],props:{destination:{type:String,required:!0},blacklistIds:{type:Array,default:function(){return[]}}},data:function(){return{targetMonth:null}},computed:function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?P(Object(e),!0).forEach((function(t){Z(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):P(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({},(0,i.Se)(["files"])),watch:{monthsList:function(n){null===this.targetMonth&&(this.targetMonth=n[0])}},methods:{getFiles:function(){this.fetchFiles("",{},this.blacklistIds)},emitPickedEvent:function(){this.$emit("files-picked",this.selectedFileIds)}}};var I=e(93379),T=e.n(I),O=e(7795),D=e.n(O),H=e(90569),R=e.n(H),j=e(3565),V=e.n(j),W=e(19216),Y=e.n(W),L=e(44589),N=e.n(L),$=e(28300),z={};z.styleTagTransform=N(),z.setAttributes=V(),z.insert=R().bind(null,"head"),z.domAPI=D(),z.insertStyleElement=Y();T()($.Z,z);$.Z&&$.Z.locals&&$.Z.locals;const G=(0,s.Z)(E,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"file-picker"},[e("div",{staticClass:"file-picker__content"},[e("div",{staticClass:"file-picker__navigation",class:{"file-picker__navigation--loading":n.loadingFiles&&0===n.monthsList.length}},n._l(n.monthsList,(function(t){return e("div",{key:t,staticClass:"file-picker__navigation__month",class:{selected:n.targetMonth===t},on:{click:function(e){n.targetMonth=t}}},[n._v("\n\t\t\t\t"+n._s(n._f("dateMonthAndYear")(t))+"\n\t\t\t")])})),0),n._v(" "),e("FilesListViewer",{staticClass:"file-picker__file-list",class:{"file-picker__file-list--loading":n.loadingFiles&&0===n.monthsList.length},attrs:{"file-ids-by-section":n.fileIdsByMonth,sections:n.monthsList,loading:n.loadingFiles,"base-height":100,"section-header-height":50,"scroll-to-section":n.targetMonth},on:{"need-content":n.getFiles},scopedSlots:n._u([{key:"default",fn:function(t){var i=t.file,r=t.height,a=t.visibility;return[i.sectionHeader?e("h3",{staticClass:"section-header",style:{height:r+"px"},attrs:{id:"file-picker-section-header-"+i.id}},[n._v("\n\t\t\t\t\t"+n._s(n._f("dateMonthAndYear")(i.id))+"\n\t\t\t\t")]):e("File",{attrs:{file:n.files[i.id],"allow-selection":!0,selected:!0===n.selection[i.id],visibility:a,semaphore:n.semaphore},on:{"select-toggled":n.onFileSelectToggle}})]}}])})],1),n._v(" "),e("div",{staticClass:"file-picker__actions"},[e("Button",{attrs:{type:"tertiary"},scopedSlots:n._u([{key:"icon",fn:function(){return[e("Upload")]},proxy:!0}])},[n._v("\n\t\t\t"+n._s(n.t("photos","Upload from computer"))+"\n\t\t")]),n._v(" "),e("Button",{attrs:{type:"primary"},on:{click:n.emitPickedEvent},scopedSlots:n._u([{key:"icon",fn:function(){return[e("ImagePlus")]},proxy:!0}])},[n._v("\n\t\t\t"+n._s(n.t("photos","Add items to {destination}",{destination:n.destination}))+"\n\t\t")])],1)])}),[],!1,null,"088313cd",null).exports;const q={name:"ShareAlbumForm"};const U=(0,s.Z)(q,(function(){var n=this,t=n.$createElement;return(n._self._c||t)("div",[n._v("ShareAlbumForm")])}),[],!1,null,null,null).exports;var K=e(74356),X=e(80917),J=e(59537),Q=e(81067),nn=e(2161),tn=e(4615),en=e(99588);function rn(n,t,e,i,r,a,o){try{var l=n[a](o),s=l.value}catch(n){return void e(n)}l.done?t(s):Promise.resolve(s).then(i,r)}function an(n){return function(){var t=this,e=arguments;return new Promise((function(i,r){var a=n.apply(t,e);function o(n){rn(a,i,r,o,l,"next",n)}function l(n){rn(a,i,r,o,l,"throw",n)}o(void 0)}))}}function on(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,i)}return e}function ln(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?on(Object(e),!0).forEach((function(t){sn(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):on(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function sn(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}const cn={name:"AlbumContent",components:{Plus:r.Z,Pencil:a.default,Star:f.default,Close:p.default,Download:m.Z,DownloadMultiple:h,Delete:o.Z,ImagePlus:c,AlertCircle:d,FilesListViewer:x.Z,File:y.Z,AlbumForm:K.Z,EmptyContent:g.EmptyContent,Loader:w.Z,Actions:g.Actions,ActionButton:g.ActionButton,Button:g.Button,Modal:g.Modal,FilesPicker:G,ShareAlbumForm:U},mixins:[C.Z,v.Z,_.Z],props:{albumName:{type:String,default:"/"}},data:function(){return{showAddPhotosModal:!1,showShareModal:!1,showEditAlbumForm:!1,FolderIllustration:X,loadingCount:0}},computed:ln(ln({},(0,i.Se)(["files","albumsFiles"])),{},{album:function(){return this.albums[this.albumName]},albumFileIds:function(){return this.albumsFiles[this.albumName]||[]},shouldFavoriteSelection:function(){var n=this;return this.selectedFileIds.some((function(t){return 0===n.$store.state.files.files[t].favorite}))}}),watch:{album:function(){this.fetchAlbumContent()}},methods:ln(ln({},(0,i.nv)(["appendFiles","deleteAlbum","addFilesToAlbum","removeFilesFromAlbum","toggleFavoriteForFiles","downloadFiles"])),{},{fetchAlbumContent:function(){var n=this;return an(regeneratorRuntime.mark((function t(){var e,i,r,a,o,l,s,c,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.loadingFiles&&!n.showEditAlbumForm){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,n.semaphore.acquire((function(){return 0}),"fetchFiles");case 4:return e=t.sent,t.next=7,n.fetchSemaphore.acquire();case 7:return i=t.sent,t.prev=8,n.errorFetchingFiles=null,n.loadingFiles=!0,n.semaphoreSymbol=e,a=(0,tn.Z)(Q.Z.getDirectoryContents),o=a.request,l=a.cancel,n.cancelFilesRequest=l,t.next=16,o("/photos/".concat(null===(r=(0,b.getCurrentUser)())||void 0===r?void 0:r.uid,"/albums/").concat(n.albumName),{data:nn.Z,details:!0});case 16:if(s=t.sent,c=s.data.map((function(n){return(0,en.AX)(n)})).map((function(n){return ln(ln({},n),{},{filename:n.realpath.replace("/".concat((0,b.getCurrentUser)().uid,"/files"),"")})})),u=c.map((function(n){return n.fileid})).map((function(n){return n.toString()})),n.appendFiles(c),!(c.length>0)){t.next=23;break}return t.next=23,n.$store.commit("addFilesToAlbum",{albumName:n.albumName,fileIdsToAdd:u});case 23:J.Z.debug("[AlbumContent] Fetched ".concat(u.length," new files: "),u),t.next=39;break;case 26:if(t.prev=26,t.t0=t.catch(8),!t.t0.response||!t.t0.response.status){t.next=38;break}if(404!==t.t0.response.status){t.next=33;break}n.errorFetchingFiles=404,t.next=38;break;case 33:if("ERR_CANCELED"!==t.t0.code){t.next=37;break}return t.abrupt("return");case 37:n.errorFetchingFiles=t.t0;case 38:J.Z.error("Error fetching album files",t.t0);case 39:return t.prev=39,n.loadingFiles=!1,n.cancelFilesRequest=function(){},n.semaphore.release(e),n.fetchSemaphore.release(i),t.finish(39);case 45:return t.abrupt("return",[]);case 46:case"end":return t.stop()}}),t,null,[[8,26,39,45]])})))()},openViewer:function(n){var t=this,e=this.files[n];OCA.Viewer.open({path:e.filename,list:this.albumFileIds.map((function(n){return t.files[n]})).filter((function(n){return!n.sectionHeader})),loadMore:e.loadMore?an(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadMore(!0);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)}))):function(){return[]},canLoop:e.canLoop})},redirectToNewName:function(n){var t=n.album;this.showEditAlbumForm=!1,this.$router.push("/albums/".concat(t.basename))},handleFilesPicked:function(n){var t=this;return an(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loadingCount++,e.next=4,t.addFilesToAlbum({albumName:t.albumName,fileIdsToAdd:n});case 4:t.showAddPhotosModal=!1,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),J.Z.error(e.t0);case 10:return e.prev=10,t.loadingCount--,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})))()},handleRemoveFilesFromAlbum:function(n){var t=this;return an(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.loadingCount++,e.next=4,t.removeFilesFromAlbum({albumName:t.albumName,fileIdsToRemove:n});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),J.Z.error(e.t0);case 9:return e.prev=9,t.loadingCount--,e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[0,6,9,12]])})))()},handleDeleteAlbum:function(){var n=this;return an(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.loadingCount++,t.next=4,n.deleteAlbum({albumName:n.albumName});case 4:n.$router.push("/albums"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),J.Z.error(t.t0);case 10:return t.prev=10,n.loadingCount--,t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[0,7,10,13]])})))()},favoriteSelection:function(){var n=this;return an(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.loadingCount++,t.next=4,n.toggleFavoriteForFiles({fileIds:n.selectedFileIds,favoriteState:!0});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),J.Z.error(t.t0);case 9:return t.prev=9,n.loadingCount--,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})))()},unFavoriteSelection:function(){var n=this;return an(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.loadingCount++,t.next=4,n.toggleFavoriteForFiles({fileIds:n.selectedFileIds,favoriteState:!1});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),J.Z.error(t.t0);case 9:return t.prev=9,n.loadingCount--,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})))()},downloadAllFiles:function(){var n=this;return an(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.loadingCount++,t.next=4,n.downloadFiles(n.albumFileIds);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),J.Z.error(t.t0);case 9:return t.prev=9,n.loadingCount--,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})))()},downloadSelection:function(){var n=this;return an(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.loadingCount++,t.next=4,n.downloadFiles(n.selectedFileIds);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),J.Z.error(t.t0);case 9:return t.prev=9,n.loadingCount--,t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})))()}})};var un=e(22112),dn={};dn.styleTagTransform=N(),dn.setAttributes=V(),dn.insert=R().bind(null,"head"),dn.domAPI=D(),dn.insertStyleElement=Y();T()(un.Z,dn);un.Z&&un.Z.locals&&un.Z.locals;const fn=(0,s.Z)(cn,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return void 0!==n.album||n.loadingAlbums?n.errorFetchingFiles||n.errorFetchingAlbums?e("EmptyContent",{scopedSlots:n._u([{key:"icon",fn:function(){return[e("AlertCircle")]},proxy:!0}])},[n._v("\n\t"+n._s(n.t("photos","An error occurred"))+"\n")]):e("div",{staticClass:"album"},[e("div",{staticClass:"album__header"},[e("div",{staticClass:"album__header__left"},[e("div",{staticClass:"album__header__title"},[void 0!==n.album?e("b",{staticClass:"album-name"},[n._v("\n\t\t\t\t\t"+n._s(n.album.basename)+"\n\n\t\t\t\t")]):n._e()]),n._v(" "),n.loadingCount>0?e("Loader"):n._e()],1),n._v(" "),void 0!==n.album?e("div",{staticClass:"album__header__actions"},[0!==n.album.nbItems?e("Button",{attrs:{type:"tertiary","aria-label":n.t("photos","Add photos to this album")},on:{click:function(t){n.showAddPhotosModal=!0}},scopedSlots:n._u([{key:"icon",fn:function(){return[e("Plus")]},proxy:!0}],null,!1,1489515321)}):n._e(),n._v(" "),e("Actions",{attrs:{"force-menu":!0}},[e("ActionButton",{attrs:{"close-after-click":!0,title:n.t("photos","Edit details")},on:{click:function(t){n.showEditAlbumForm=!0}},scopedSlots:n._u([{key:"icon",fn:function(){return[e("Pencil")]},proxy:!0}],null,!1,514409694)}),n._v(" "),e("ActionButton",{attrs:{"close-after-click":!0,"aria-label":n.t("photos","Download all files in album"),title:n.t("photos","Download all files in album")},on:{click:n.downloadAllFiles}},[e("DownloadMultiple",{attrs:{slot:"icon"},slot:"icon"})],1),n._v(" "),n.selectedFileIds.length>0?[e("ActionButton",{attrs:{"close-after-click":!0,"aria-label":n.t("photos","Download selection"),title:n.t("photos","Download selected files")},on:{click:n.downloadSelection}},[e("Download",{attrs:{slot:"icon"},slot:"icon"})],1),n._v(" "),n.shouldFavoriteSelection?e("ActionButton",{attrs:{"close-after-click":!0,"aria-label":n.t("photos","Mark selection as favorite"),title:n.t("photos","Favorite")},on:{click:n.favoriteSelection}},[e("Star",{attrs:{slot:"icon"},slot:"icon"})],1):e("ActionButton",{attrs:{"close-after-click":!0,"aria-label":n.t("photos","Remove selection from favorites"),title:n.t("photos","Remove from favorites")},on:{click:n.unFavoriteSelection}},[e("Star",{attrs:{slot:"icon"},slot:"icon"})],1),n._v(" "),e("ActionButton",{attrs:{"close-after-click":!0,title:n.n("photos","Remove item from album","Remove items from album",n.selection.length)},on:{click:function(t){return n.handleRemoveFilesFromAlbum(n.selectedFileIds)}},scopedSlots:n._u([{key:"icon",fn:function(){return[e("Close")]},proxy:!0}],null,!1,1051939733)})]:n._e(),n._v(" "),e("ActionButton",{attrs:{"close-after-click":!0,title:n.t("photos","Delete album")},on:{click:n.handleDeleteAlbum},scopedSlots:n._u([{key:"icon",fn:function(){return[e("Delete")]},proxy:!0}],null,!1,3429380666)})],2)],1):n._e()]),n._v(" "),void 0===n.album||0!==n.album.nbItems||n.loadingFiles||n.loadingAlbums?n._e():e("div",{staticClass:"album__empty"},[e("EmptyContent",{scopedSlots:n._u([{key:"icon",fn:function(){return[e("ImagePlus")]},proxy:!0},{key:"desc",fn:function(){return[n._v("\n\t\t\t\t"+n._s(n.t("photos","This album doesn't have any photos or videos yet!"))+"\n\t\t\t")]},proxy:!0}],null,!1,589841004)}),n._v(" "),e("Button",{staticClass:"album__empty__button",attrs:{type:"primary","aria-label":n.t("photos","Add photos to this album")},on:{click:function(t){n.showAddPhotosModal=!0}},scopedSlots:n._u([{key:"icon",fn:function(){return[e("Plus")]},proxy:!0}],null,!1,1489515321)},[n._v("\n\t\t\t"+n._s(n.t("photos","Add"))+"\n\t\t")])],1),n._v(" "),void 0!==n.album?e("FilesListViewer",{staticClass:"album__photos",attrs:{"use-window":!0,"file-ids":n.albumFileIds,loading:n.loadingFiles||n.loadingAlbums},scopedSlots:n._u([{key:"default",fn:function(t){var i=t.file,r=t.visibility;return e("File",{attrs:{file:n.files[i.id],"allow-selection":!0,selected:!0===n.selection[i.id],visibility:r,semaphore:n.semaphore},on:{click:n.openViewer,"select-toggled":n.onFileSelectToggle}})}}],null,!1,3592900521)}):n._e(),n._v(" "),n.showAddPhotosModal?e("Modal",{attrs:{size:"large",title:n.t("photos","Add photos to the album")},on:{close:function(t){n.showAddPhotosModal=!1}}},[e("FilesPicker",{attrs:{destination:n.album.basename,"blacklist-ids":n.albumFileIds},on:{"files-picked":n.handleFilesPicked}})],1):n.showShareModal?e("Modal",{attrs:{title:n.t("photos","Share the album")},on:{close:function(t){n.showShareModal=!1}}},[e("ShareAlbumForm",{on:{albumShared:function(t){n.showShareModal=!1}}})],1):n._e(),n._v(" "),n.showEditAlbumForm?e("Modal",{attrs:{title:n.t("photos","New album")},on:{close:function(t){n.showEditAlbumForm=!1}}},[e("AlbumForm",{attrs:{album:n.album},on:{done:n.redirectToNewName}})],1):n._e()],1):e("EmptyContent",{staticClass:"empty-content-with-illustration",scopedSlots:n._u([{key:"icon",fn:function(){return[e("span",{staticClass:"empty-content-illustration",domProps:{innerHTML:n._s(n.FolderIllustration)}})]},proxy:!0}],null,!1,3945105199)},[n._v("\n\t"+n._s(n.t("photos","This album does not exist"))+"\n")])}),[],!1,null,"bda52398",null).exports},80917:n=>{n.exports='<svg id="3ecf9745-447a-4766-8a86-6837975429df" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="729.47" height="695.09" viewBox="0 0 729.47 695.09" style="margin-left:calc(50% * (730 - 615) / 730)"><defs><linearGradient id="fc2ce546-a06c-4acb-8cca-fc7989cc5e45" x1="611.98" y1="687.2" x2="611.98" y2="258.73" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="gray" stop-opacity="0.25"/><stop offset="0.54" stop-color="gray" stop-opacity="0.12"/><stop offset="1" stop-color="gray" stop-opacity="0.1"/></linearGradient><linearGradient id="8de405ef-36e0-4554-af41-d0565e95cbca" x1="410.91" y1="358.56" x2="452.61" y2="86.08" gradientTransform="matrix(1.01, 0.13, -0.13, 1.02, 62.29, -41.05)" xlink:href="#fc2ce546-a06c-4acb-8cca-fc7989cc5e45"/><linearGradient id="90a47f5c-11a4-432e-bbe5-e819485e2974" x1="597.01" y1="453.03" x2="597.01" y2="138.64" gradientTransform="translate(140.76 -189.73) rotate(20.42)" xlink:href="#fc2ce546-a06c-4acb-8cca-fc7989cc5e45"/><linearGradient id="c3d8783b-6f33-4c65-b7a9-7a0b4c25dfb1" x1="756.62" y1="488.3" x2="772.25" y2="249.01" gradientTransform="matrix(0.26, 0.99, -1.02, 0.25, 910.43, -476.82)" xlink:href="#fc2ce546-a06c-4acb-8cca-fc7989cc5e45"/><linearGradient id="1441cd83-913d-413c-98d4-824021df009a" x1="310" y1="695.09" x2="310" y2="203.86" xlink:href="#fc2ce546-a06c-4acb-8cca-fc7989cc5e45"/><linearGradient id="4913d3bc-5f66-46f4-9c65-3645c89ed5d3" x1="545.79" y1="695.81" x2="545.79" y2="464.64" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#b3b3b3" stop-opacity="0.25"/><stop offset="0.54" stop-color="#b3b3b3" stop-opacity="0.1"/><stop offset="1" stop-color="#b3b3b3" stop-opacity="0.05"/></linearGradient><linearGradient id="0cf8a40c-444c-472e-8722-d672ac4b1674" x1="310.8" y1="580.62" x2="310.8" y2="375.85" xlink:href="#4913d3bc-5f66-46f4-9c65-3645c89ed5d3"/><clipPath id="f4edd298-8257-4895-a91b-ae15b3b0d94f" transform="translate(-235.26 -102.45)"><rect x="400.07" y="483.3" width="291.69" height="194.01" rx="8.85" ry="8.85" fill="#fff"/></clipPath></defs><title>folder</title><polygon points="618.97 687.2 513.53 687.2 513.53 258.73 710.42 258.73 618.97 687.2" fill="url(#fc2ce546-a06c-4acb-8cca-fc7989cc5e45)"/><polygon points="613.72 687.2 510.37 687.2 510.37 258.73 703.35 258.73 613.72 687.2" fill="#f5f5f5"/><rect x="249.88" y="158.45" width="439.19" height="168.85" transform="translate(-283.32 32.9) rotate(-15.62)" fill="url(#8de405ef-36e0-4554-af41-d0565e95cbca)"/><rect x="254.32" y="160.66" width="431.85" height="163.44" transform="translate(-283.15 33.09) rotate(-15.62)" fill="#f4f4f4"/><rect x="367.9" y="230.63" width="108.65" height="8.29" transform="translate(-282.88 19.88) rotate(-15.62)" fill="#f5f5f5"/><rect x="376.82" y="262.55" width="108.65" height="8.29" transform="translate(-291.14 23.46) rotate(-15.62)" fill="#fff"/><rect x="371.14" y="237.71" width="174.6" height="8.29" transform="translate(-283.45 29.89) rotate(-15.62)" fill="#fff"/><circle cx="329.58" cy="277.88" r="19.34" transform="translate(-297.9 -3.47) rotate(-15.62)" fill="#fff"/><rect x="376.38" y="210.25" width="441.26" height="171.17" transform="translate(-300.97 124.47) rotate(-20.42)" fill="url(#90a47f5c-11a4-432e-bbe5-e819485e2974)"/><rect x="381.03" y="214.81" width="431.85" height="163.44" transform="translate(-301.21 124.5) rotate(-20.42)" fill="#f7f7f7"/><rect x="494.14" y="288.83" width="108.65" height="8.29" transform="translate(-303.02 107.35) rotate(-20.42)" fill="#f5f5f5"/><rect x="505.71" y="319.89" width="108.65" height="8.29" transform="translate(-313.13 113.34) rotate(-20.42)" fill="#fff"/><rect x="497.85" y="292.85" width="174.6" height="8.29" transform="matrix(0.94, -0.35, 0.35, 0.94, -302.12, 120.41)" fill="#fff"/><circle cx="459.76" cy="343.69" r="19.34" transform="translate(-326.29 79.59) rotate(-20.42)" fill="#fff"/><rect x="646.89" y="150.88" width="172.17" height="440.14" transform="translate(3.97 925.06) rotate(-79.9)" fill="url(#c3d8783b-6f33-4c65-b7a9-7a0b4c25dfb1)"/><rect x="515.81" y="288.22" width="431.85" height="163.44" transform="translate(-159.05 -225.04) rotate(10.1)" fill="#fafafa"/><rect x="687.63" y="287.92" width="8.29" height="108.65" transform="translate(-1.75 860.83) rotate(-79.9)" fill="#f5f5f5"/><rect x="681.81" y="320.56" width="8.29" height="108.65" transform="translate(-38.67 882.02) rotate(-79.9)" fill="#fff"/><rect x="717.18" y="277.05" width="8.29" height="174.6" transform="translate(0.86 908.15) rotate(-79.9)" fill="#fff"/><circle cx="589.6" cy="340.88" r="19.34" transform="translate(-84.66 759.11) rotate(-79.9)" fill="#fff"/><polygon points="171.78 253.69 100.61 203.86 2.07 203.86 2.07 253.69 2.07 278.1 2.07 695.09 617.93 695.09 617.93 253.69 171.78 253.69" fill="url(#1441cd83-913d-413c-98d4-824021df009a)"/><polygon points="174.44 258.73 104.36 210.36 7.34 210.36 7.34 258.73 7.34 282.43 7.34 687.2 613.72 687.2 613.72 258.73 174.44 258.73" fill="#fff"/><path d="M711.54,688.53a7.25,7.25,0,0,1-7.21,7.28H387.26a7.25,7.25,0,0,1-7.21-7.28V471.93a7.25,7.25,0,0,1,7.21-7.28H704.33a7.25,7.25,0,0,1,7.21,7.28" transform="translate(-235.26 -102.45)" fill="url(#4913d3bc-5f66-46f4-9c65-3645c89ed5d3)"/><path d="M707.81,685a7,7,0,0,1-7,7H391.05a7,7,0,0,1-7-7V475.62a7,7,0,0,1,7-7H700.77a7,7,0,0,1,7,7" transform="translate(-235.26 -102.45)" fill="#fff"/><g id="114cebd5-d8fe-4021-8e49-fe55d7dac6be" data-name="&lt;Rectangle&gt;"><rect x="161.12" y="375.85" width="299.37" height="204.76" rx="8.85" ry="8.85" fill="url(#0cf8a40c-444c-472e-8722-d672ac4b1674)"/></g><rect x="164.8" y="380.84" width="291.69" height="194.01" rx="8.85" ry="8.85" fill="#fff"/><g clip-path="url(#f4edd298-8257-4895-a91b-ae15b3b0d94f)"><path d="M383.84,675.53l81.44-93.31a16.21,16.21,0,0,1,22.94-1.5L511,600.84a16.21,16.21,0,0,0,21.16.25l69.7-58.58A16.21,16.21,0,0,1,624.3,544l85.53,94.14a16.21,16.21,0,0,1,4.15,9.47l3.3,37.13a16.21,16.21,0,0,1-16.15,17.65H396.06a16.21,16.21,0,0,1-16.2-15.72h0A16.21,16.21,0,0,1,383.84,675.53Z" transform="translate(-235.26 -102.45)" fill="#6c63ff"/></g><circle cx="199.93" cy="411.95" r="18.06" fill="#ff5252"/></svg>'}}]);
//# sourceMappingURL=photos-src_views_AlbumContent_vue.js.map?v=d535b023fd6741a5b964