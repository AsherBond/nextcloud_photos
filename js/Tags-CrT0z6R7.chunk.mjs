(function(){"use strict";try{if(typeof document<"u"){var a=document.createElement("style");a.appendChild(document.createTextNode(".tag-cover[data-v-3f8c5577]{display:flex;flex-direction:column;padding:16px;border-radius:12px}.tag-cover[data-v-3f8c5577]:hover,.tag-cover[data-v-3f8c5577]:focus{background:var(--color-background-dark)}.tag-cover__image[data-v-3f8c5577]{width:350px;height:350px;object-fit:cover;border-radius:12px}@media only screen and (max-width: 1200px){.tag-cover__image[data-v-3f8c5577]{width:250px;height:250px}}.tag-cover__image--placeholder[data-v-3f8c5577]{background:var(--color-primary-element-light)}.tag-cover__image--placeholder[data-v-3f8c5577] .material-design-icon{width:100%;height:100%}.tag-cover__image--placeholder[data-v-3f8c5577] .material-design-icon .material-design-icon__svg{fill:var(--color-primary-element)}.tag-cover__details[data-v-3f8c5577]{display:flex;flex-direction:column;margin-top:16px;width:350px}@media only screen and (max-width: 1200px){.tag-cover__details[data-v-3f8c5577]{width:250px}}.tag-cover__details__first-line[data-v-3f8c5577]{display:flex}.tag-cover__details__second-line[data-v-3f8c5577]{display:flex;color:var(--color-text-lighter)}.tag-cover__details__name[data-v-3f8c5577]{flex-grow:1;margin:0;font-weight:400;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.loader[data-v-97ef01c0]{margin-top:30vh}.container[data-v-97ef01c0]{padding-left:44px}.container>h2[data-v-97ef01c0]{margin-left:14px;margin-top:40px}.popular-tags[data-v-97ef01c0],.tags[data-v-97ef01c0]{display:flex;flex-direction:row;gap:8px;flex-wrap:wrap}")),document.head.appendChild(a)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
import{x as a,o as r,f as n}from"./index-CHIr7m_h.chunk.mjs";import{_ as l}from"./vue.runtime.esm-D5CTWQro.chunk.mjs";import{N as g}from"./NcEmptyContent-CuN02Q0X.chunk.mjs";import{I as c}from"./ImageMultiple-C84QlxFY.chunk.mjs";import{A as i}from"./AbortControllerMixin-DeafVJKx.chunk.mjs";import{n as o}from"./index-BU47S74H.chunk.mjs";const h={name:"TagCover",components:{ImageMultipleIcon:c},mixins:[i],props:{tag:{type:Object,required:!0}},data(){return{loadCover:!1,observer:null}},computed:{...a(["files","tags"]),coverUrl(){return this.loadCover?l(`/core/preview?fileId=${this.tag.referenceFileid}&x=512&y=512&forceIcon=0&a=1`):""},count(){return this.tag.filesAssigned}},watch:{loadCover(){this.tag.filesAssigned||this.$store.dispatch("fetchTagFiles",{id:this.tag.id,signal:this.abortController.signal})}},mounted(){this.observer=new IntersectionObserver(t=>{t[0].isIntersecting&&(this.loadCover=!0,this.observer.disconnect())}),this.observer.observe(this.$el)}};var d=function(){var t=this,s=t._self._c;return s("router-link",{staticClass:"tag-cover",attrs:{to:`/tags/${t.tag.displayName}`}},[t.tag.filesAssigned!==0?s("img",{staticClass:"tag-cover__image",attrs:{src:t.coverUrl}}):s("div",{staticClass:"tag-cover__image tag-cover__image--placeholder"},[s("ImageMultipleIcon",{attrs:{size:128}})],1),s("div",{staticClass:"tag-cover__details"},[s("div",{staticClass:"tag-cover__details__first-line"},[s("h3",{staticClass:"tag-cover__details__name"},[t._v(" "+t._s(t.t("recognize",t.tag.displayName))+" ")])]),s("div",{staticClass:"tag-cover__details__second-line"},[t._v(" "+t._s(t.n("photos","%n photo","%n photos",t.count))+" ")])])])},p=[],m=o(h,d,p,!1,null,"3f8c5577");const v=m.exports,u={name:"Tags",components:{TagCover:v,NcLoadingIcon:r,NcEmptyContent:g},mixins:[i],data(){return{error:null,loading:!1,showTags:!1}},computed:{...a(["files","tags","tagsNames"]),tagsList(){return Object.keys(this.tagsNames).map(t=>this.tags[this.tagsNames[t]]).filter(t=>t&&t.id)},popularTags(){return Object.keys(this.tagsNames).filter(t=>this.tags[this.tagsNames[t]].filesAssigned>50).sort((t,s)=>(this.tags[this.tagsNames[s]].filesAssigned||this.tagCounts[s])-(this.tags[this.tagsNames[t]].filesAssigned||this.tagCounts[t])).slice(0,9).map(t=>this.tags[this.tagsNames[t]])}},async beforeMount(){await this.fetchRootContent()},methods:{async fetchRootContent(){OCA.Viewer.close(),this.error=null;try{this.tagsList.length||(this.loading=!0,await this.$store.dispatch("fetchAllTags",{signal:this.abortController.signal}))}catch(t){n.error(t),this.error=!0}finally{this.loading=!1}}}};var _=function(){var t=this,s=t._self._c;return s("div",[t.error?s("NcEmptyContent",{attrs:{name:t.t("photos","An error occurred")}}):t._e(),!t.loading&&t.tagsList.length===0?s("NcEmptyContent",{attrs:{name:t.t("photos","No tags yet"),description:t.t("photos","Photos with tags will show up here")}}):t._e(),t.loading?s("NcLoadingIcon",{staticClass:"loader"}):s("div",{staticClass:"container"},[t.popularTags.length?s("h2",[t._v(" "+t._s(t.t("photos","Popular tags"))+" ")]):t._e(),s("div",{staticClass:"popular-tags"},t._l(t.popularTags,function(e){return s("TagCover",{key:e.id,attrs:{tag:e}})}),1),t.tagsList.length?s("h2",[t._v(" "+t._s(t.t("photos","All tags"))+" ")]):t._e(),s("div",{staticClass:"tags"},t._l(t.tagsList,function(e){return s("TagCover",{key:e.id,attrs:{tag:e}})}),1)])],1)},f=[],C=o(u,_,f,!1,null,"97ef01c0");const w=C.exports;export{w as default};
//# sourceMappingURL=Tags-CrT0z6R7.chunk.mjs.map
