(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".folder[data-v-b29d3ff4]{display:flex;gap:16px;min-width:300px}.folder__info[data-v-b29d3ff4]{display:flex;flex-direction:column;flex-grow:1;justify-content:center}.folder__path[data-v-b29d3ff4]{font-weight:700}.photos-locations-container[data-v-ff7d1d10]{display:flex;flex-direction:column;width:-moz-fit-content;width:fit-content}.photos-locations-container .photos-locations[data-v-ff7d1d10]{margin-bottom:16px}.photos-locations-container .photos-locations li[data-v-ff7d1d10]{list-style:none}")),document.head.appendChild(t)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
import{e as i,d as n,f as c}from"./index-CYNaqKNs.chunk.mjs";import{d as a,t as o}from"./vue.runtime.esm-Cvc35Ey2.chunk.mjs";import{n as s}from"./index-Y-UlKA14.chunk.mjs";import{P as d}from"./Plus-BsFB-qaS.chunk.mjs";import{g as u}from"./index-RCrftHFV.chunk.mjs";import{F as p}from"./Folder-Bsvyhgud.chunk.mjs";import{C as h}from"./Close-BZjlrH3B.chunk.mjs";const f={name:"FolderMultipleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var m=function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon folder-multiple-icon",attrs:{"aria-hidden":e.title?null:"true","aria-label":e.title,role:"img"},on:{click:function(r){return e.$emit("click",r)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M22,4H14L12,2H6A2,2 0 0,0 4,4V16A2,2 0 0,0 6,18H22A2,2 0 0,0 24,16V6A2,2 0 0,0 22,4M2,6H0V11H0V20A2,2 0 0,0 2,22H20V20H2V6Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])},F=[],_=s(f,m,F,!1,null,null);const v=_.exports,S=a({name:"PhotosFolder",components:{NcButton:i,Folder:p,Close:h},props:{path:{type:String,required:!0},canDelete:{type:Boolean,default:!1},rootFolderLabel:{type:String,required:!0},rootFolderIcon:{type:Object,required:!0}},emits:["remove-folder"],computed:{folderName(){return this.path==="/"?this.rootFolderLabel:this.path.split("/").pop()},subname(){switch((this.path.match(/\//g)??[]).length){case 1:return"";case 2:return this.path.split("/").splice(0,2).join("/");default:return this.path.split("/").splice(0,3).join("/")}}},methods:{emitRemoveSourceFolder(){this.$emit("remove-folder")},t:o}});var y=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"folder"},[e.path==="/"?t(e.rootFolderIcon,{tag:"component"}):t("Folder"),t("span",{staticClass:"folder__info"},[t("div",{staticClass:"folder__path"},[e._v(e._s(e.folderName))]),e.subname!==""?t("div",[e._v(" "+e._s(e.subname)+" ")]):e._e()]),e.canDelete?t("NcButton",{attrs:{type:"tertiary","aria-label":e.t("photos","Delete source directory")},on:{click:e.emitRemoveSourceFolder},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Close",{attrs:{size:20}})]},proxy:!0}],null,!1,2121748766)}):e._e()],1)},g=[],b=s(S,y,g,!1,null,"b29d3ff4");const k=b.exports,C=a({name:"PhotosSourceLocationsSettings",components:{NcButton:i,PhotosFolder:k,Plus:d},data(){return{FolderMultiple:v}},computed:{photosSourceFolders(){return this.$store.state.userConfig.photosSourceFolders}},methods:{debounceAddSourceFolder:n(function(...e){this.addSourceFolder(...e)},200,!1),async openFilePicker(e){return u(e).setMultiSelect(!1).addMimeTypeFilter("httpd/unix-directory").allowDirectories().addButton({label:o("photos","Pick folder"),callback:t=>c.debug("Picked",{nodes:t})}).build().pick()},async addSourceFolder(){const e=await this.openFilePicker(o("photos","Select a source folder for your media"));this.photosSourceFolders.includes(e)||this.$store.dispatch("updateUserConfig",{key:"photosSourceFolders",value:[...this.photosSourceFolders,e]})},removeSourceFolder(e){const t=[...this.photosSourceFolders];t.splice(e,1),this.$store.dispatch("updateUserConfig",{key:"photosSourceFolders",value:t})},t:o}});var P=function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"photos-locations-container"},[t("div",{staticClass:"photos-locations"},e._l(e.photosSourceFolders,function(r,l){return t("li",{key:l},[t("PhotosFolder",{attrs:{path:r,"can-delete":e.photosSourceFolders.length!==1,"root-folder-label":e.t("photos","All folders"),"root-folder-icon":e.FolderMultiple},on:{"remove-folder":function(B){return e.removeSourceFolder(l)}}})],1)}),0),t("NcButton",{attrs:{"aria-label":e.t("photos","Add a Photos source for the timelines")},on:{click:e.debounceAddSourceFolder},scopedSlots:e._u([{key:"icon",fn:function(){return[t("Plus",{attrs:{size:20}})]},proxy:!0}])},[e._v(" "+e._s(e.t("photos","Add folder"))+" ")])],1)},x=[],A=s(C,P,x,!1,null,"ff7d1d10");const D=A.exports;export{k as P,D as a};
//# sourceMappingURL=PhotosSourceLocationsSettings-CVvc_WHE.chunk.mjs.map
