{"version":3,"file":"PhotosSourceLocationsSettings-DxKhRxoW.chunk.mjs","sources":["../node_modules/vue-material-design-icons/FolderMultiple.vue","../src/components/Settings/PhotosFolder.vue","../src/components/Settings/PhotosSourceLocationsSettings.vue"],"sourcesContent":["<template>\n  <span v-bind=\"$attrs\"\n        :aria-hidden=\"title ? null : 'true'\"\n        :aria-label=\"title\"\n        class=\"material-design-icon folder-multiple-icon\"\n        role=\"img\"\n        @click=\"$emit('click', $event)\">\n    <svg :fill=\"fillColor\"\n         class=\"material-design-icon__svg\"\n         :width=\"size\"\n         :height=\"size\"\n         viewBox=\"0 0 24 24\">\n      <path d=\"M22,4H14L12,2H6A2,2 0 0,0 4,4V16A2,2 0 0,0 6,18H22A2,2 0 0,0 24,16V6A2,2 0 0,0 22,4M2,6H0V11H0V20A2,2 0 0,0 2,22H20V20H2V6Z\">\n        <title v-if=\"title\">{{ title }}</title>\n      </path>\n    </svg>\n  </span>\n</template>\n\n<script>\nexport default {\n  name: \"FolderMultipleIcon\",\n  emits: ['click'],\n  props: {\n    title: {\n      type: String,\n    },\n    fillColor: {\n      type: String,\n      default: \"currentColor\"\n    },\n    size: {\n      type: Number,\n      default: 24\n    }\n  }\n}\n</script>","<!--\n - SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"folder\">\n\t\t<component :is=\"rootFolderIcon\" v-if=\"path === '/'\" />\n\t\t<Folder v-else />\n\t\t<span class=\"folder__info\">\n\t\t\t<div class=\"folder__path\">{{ folderName }}</div>\n\t\t\t<div v-if=\"subname !== ''\">\n\t\t\t\t{{ subname }}\n\t\t\t</div>\n\t\t</span>\n\t\t<NcButton v-if=\"canDelete\"\n\t\t\ttype=\"tertiary\"\n\t\t\t:aria-label=\"t('photos', 'Delete source directory')\"\n\t\t\t@click=\"emitRemoveSourceFolder\">\n\t\t\t<template #icon>\n\t\t\t\t<Close :size=\"20\" />\n\t\t\t</template>\n\t\t</NcButton>\n\t</div>\n</template>\n\n<script lang='ts'>\nimport { defineComponent } from 'vue'\n\nimport Folder from 'vue-material-design-icons/Folder.vue'\nimport Close from 'vue-material-design-icons/Close.vue'\n\nimport { NcButton } from '@nextcloud/vue'\nimport { translate as t } from '@nextcloud/l10n'\n\nexport default defineComponent({\n\tname: 'PhotosFolder',\n\n\tcomponents: {\n\t\tNcButton,\n\t\tFolder,\n\t\tClose,\n\t},\n\n\tprops: {\n\t\tpath: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcanDelete: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\trootFolderLabel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\trootFolderIcon: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\temits: ['remove-folder'],\n\n\tcomputed: {\n\t\tfolderName() {\n\t\t\tif (this.path === '/') {\n\t\t\t\treturn this.rootFolderLabel\n\t\t\t} else {\n\t\t\t\treturn this.path.split('/').pop()\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Return the summary path of the folder\n\t\t * Examples:\n\t\t *  - /        ==> Home\n\t\t *  - /a       ==> nothing\n\t\t *  - /a/b     ==> /a\n\t\t *  - /a/b/c   ==> /a/b\n\t\t *  - /a/b/c/d ==> /a/b\n\t\t */\n\t\tsubname() {\n\t\t\tconst slashesCount = (this.path.match(/\\//g) ?? []).length\n\n\t\t\tswitch (slashesCount) {\n\t\t\tcase 1:\n\t\t\t\treturn ''\n\t\t\tcase 2:\n\t\t\t\treturn this.path.split('/').splice(0, 2).join('/')\n\t\t\tdefault:\n\t\t\t\treturn this.path.split('/').splice(0, 3).join('/')\n\t\t\t}\n\t\t},\n\t},\n\n\tmethods: {\n\t\temitRemoveSourceFolder() {\n\t\t\tthis.$emit('remove-folder')\n\t\t},\n\n\t\tt,\n\t},\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.folder {\n\tdisplay: flex;\n\tgap: 16px;\n\tmin-width: 300px;\n\n\t&__info {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex-grow: 1;\n\t\tjustify-content: center;\n\t}\n\n\t&__path {\n\t\tfont-weight: bold;\n\t}\n}\n</style>\n","<!--\n - SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n - SPDX-License-Identifier: AGPL-3.0-or-later\n-->\n\n<template>\n\t<div class=\"photos-locations-container\">\n\t\t<div class=\"photos-locations\">\n\t\t\t<li v-for=\"(source, index) in photosSourceFolders\"\n\t\t\t\t:key=\"index\">\n\t\t\t\t<PhotosFolder :path=\"source\"\n\t\t\t\t\t:can-delete=\"photosSourceFolders.length !== 1\"\n\t\t\t\t\t:root-folder-label=\"t('photos', 'All folders')\"\n\t\t\t\t\t:root-folder-icon=\"FolderMultiple\"\n\t\t\t\t\t@remove-folder=\"removeSourceFolder(index)\" />\n\t\t\t</li>\n\t\t</div>\n\n\t\t<NcButton :aria-label=\"t('photos', 'Add a Photos source for the timelines')\"\n\t\t\t@click=\"debounceAddSourceFolder\">\n\t\t\t<template #icon>\n\t\t\t\t<Plus :size=\"20\" />\n\t\t\t</template>\n\t\t\t{{ t('photos', 'Add folder') }}\n\t\t</NcButton>\n\t</div>\n</template>\n\n<script lang='ts'>\nimport debounce from 'debounce'\nimport { defineComponent } from 'vue'\n\nimport FolderMultiple from 'vue-material-design-icons/FolderMultiple.vue'\nimport Plus from 'vue-material-design-icons/Plus.vue'\n\nimport { NcButton } from '@nextcloud/vue'\nimport { getFilePickerBuilder } from '@nextcloud/dialogs'\nimport { translate as t } from '@nextcloud/l10n'\n\nimport PhotosFolder from './PhotosFolder.vue'\nimport logger from '../../services/logger.js'\n\nexport default defineComponent({\n\tname: 'PhotosSourceLocationsSettings',\n\n\tcomponents: {\n\t\tNcButton,\n\t\tPhotosFolder,\n\t\tPlus,\n\t},\n\n\tdata() {\n\t\treturn {\n\t\t\tFolderMultiple,\n\t\t}\n\t},\n\n\tcomputed: {\n\t\t/** @return {string[]} */\n\t\tphotosSourceFolders() {\n\t\t\treturn this.$store.state.userConfig.photosSourceFolders\n\t\t},\n\t},\n\n\tmethods: {\n\t\tdebounceAddSourceFolder: debounce(function(...args) {\n\t\t\tthis.addSourceFolder(...args)\n\t\t}, 200, false),\n\n\t\tasync openFilePicker(title) {\n\t\t\tconst picker = getFilePickerBuilder(title)\n\t\t\t\t.setMultiSelect(false)\n\t\t\t\t.addMimeTypeFilter('httpd/unix-directory')\n\t\t\t\t.allowDirectories()\n\t\t\t\t.addButton({\n\t\t\t\t\tlabel: t('photos', 'Pick folder'),\n\t\t\t\t\tcallback: (nodes) => logger.debug('Picked', { nodes }),\n\t\t\t\t})\n\t\t\t\t.build()\n\n\t\t\treturn picker.pick()\n\t\t},\n\n\t\tasync addSourceFolder() {\n\t\t\tconst pickedFolder = await this.openFilePicker(t('photos', 'Select a source folder for your media'))\n\t\t\tif (this.photosSourceFolders.includes(pickedFolder)) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.$store.dispatch('updateUserConfig', { key: 'photosSourceFolders', value: [...this.photosSourceFolders, pickedFolder] })\n\t\t},\n\n\t\tremoveSourceFolder(index) {\n\t\t\tconst folders = [...this.photosSourceFolders]\n\t\t\tfolders.splice(index, 1)\n\t\t\tthis.$store.dispatch('updateUserConfig', { key: 'photosSourceFolders', value: folders })\n\t\t},\n\n\t\tt,\n\t},\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.photos-locations-container {\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: fit-content;\n\n\t.photos-locations {\n\t\tmargin-bottom: 16px;\n\n\t\tli {\n\t\t\tlist-style: none;\n\t\t}\n\t}\n}\n</style>\n"],"names":["_sfc_main","_sfc_main$1","defineComponent","NcButton","Folder","Close","t","PhotosFolder","Plus","FolderMultiple","debounce","args","title","getFilePickerBuilder","nodes","logger","pickedFolder","index","folders"],"mappings":"wWAoBA,MAAAA,EAAA,CACA,KAAA,qBACA,MAAA,CAAA,OAAA,EACA,MAAA,CACA,MAAA,CACA,KAAA,MACA,EACA,UAAA,CACA,KAAA,OACA,QAAA,cACA,EACA,KAAA,CACA,KAAA,OACA,QAAA,EACA,CACA,CACA,goBCDAC,EAAAC,EAAA,CACA,KAAA,eAEA,WAAA,CACA,SAAAC,EAAA,OACAC,EACA,MAAAC,CACA,EAEA,MAAA,CACA,KAAA,CACA,KAAA,OACA,SAAA,EACA,EACA,UAAA,CACA,KAAA,QACA,QAAA,EACA,EACA,gBAAA,CACA,KAAA,OACA,SAAA,EACA,EACA,eAAA,CACA,KAAA,OACA,SAAA,EAAA,CAEA,EAEA,MAAA,CAAA,eAAA,EAEA,SAAA,CACA,YAAA,CACA,OAAA,KAAA,OAAA,IACA,KAAA,gBAEA,KAAA,KAAA,MAAA,GAAA,EAAA,IAAA,CAEA,EAWA,SAAA,CAGA,QAFA,KAAA,KAAA,MAAA,KAAA,GAAA,CAAA,GAAA,OAEA,CACA,IAAA,GACA,MAAA,GACA,IAAA,GACA,OAAA,KAAA,KAAA,MAAA,GAAA,EAAA,OAAA,EAAA,CAAA,EAAA,KAAA,GAAA,EACA,QACA,OAAA,KAAA,KAAA,MAAA,GAAA,EAAA,OAAA,EAAA,CAAA,EAAA,KAAA,GAAA,CAAA,CACA,CAEA,EAEA,QAAA,CACA,wBAAA,CACA,KAAA,MAAA,eAAA,CACA,EAEAC,EAAAA,CAAA,CAEA,CAAA,6oBC9DAN,EAAAE,EAAA,CACA,KAAA,gCAEA,WAAA,CACA,SAAAC,EACA,aAAAI,EACA,KAAAC,CACA,EAEA,MAAA,CACA,MAAA,CACA,eAAAC,CACA,CACA,EAEA,SAAA,CAEA,qBAAA,CACA,OAAA,KAAA,OAAA,MAAA,WAAA,mBAAA,CAEA,EAEA,QAAA,CACA,wBAAAC,EAAA,YAAAC,EAAA,CACA,KAAA,gBAAA,GAAAA,CAAA,CAAA,EACA,IAAA,EAAA,EAEA,MAAA,eAAAC,EAAA,CAWA,OAVAC,EAAAD,CAAA,EACA,eAAA,EAAA,EACA,kBAAA,sBAAA,EACA,iBAAA,EACA,UAAA,CACA,MAAAN,EAAA,SAAA,aAAA,EACA,SAAAQ,GAAAC,EAAA,MAAA,SAAA,CAAA,MAAAD,CAAA,CAAA,CACA,CAAA,EACA,MAAA,EAEA,KAAA,CACA,EAEA,MAAA,iBAAA,CACA,MAAAE,EAAA,MAAA,KAAA,eAAAV,EAAA,SAAA,uCAAA,CAAA,EACA,KAAA,oBAAA,SAAAU,CAAA,GAGA,KAAA,OAAA,SAAA,mBAAA,CAAA,IAAA,sBAAA,MAAA,CAAA,GAAA,KAAA,oBAAAA,CAAA,EAAA,CACA,EAEA,mBAAAC,EAAA,CACA,MAAAC,EAAA,CAAA,GAAA,KAAA,mBAAA,EACAA,EAAA,OAAAD,EAAA,CAAA,EACA,KAAA,OAAA,SAAA,mBAAA,CAAA,IAAA,sBAAA,MAAAC,EAAA,CACA,EAEAZ,EAAAA,CAAA,CAEA,CAAA","x_google_ignoreList":[0]}