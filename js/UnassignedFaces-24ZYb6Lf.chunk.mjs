(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".face[data-v-af5ee551]{display:flex;flex-direction:column}.face__empty[data-v-af5ee551]{display:flex;flex-direction:column;align-items:center}.face__empty__button[data-v-af5ee551]{margin-top:32px}.face__header[data-v-af5ee551]{display:flex;min-height:60px;align-items:center;justify-content:space-between;position:sticky;z-index:3;background:var(--color-main-background);padding:0 64px}@media only screen and (max-width: 1020px){.face__header[data-v-af5ee551]{padding:0 0 0 64px}}.face__header__left[data-v-af5ee551]{height:100%;display:flex;align-items:center}.face__header__title[data-v-af5ee551]{margin-left:10px}.face__header__title h2[data-v-af5ee551]{margin-bottom:0}.face__header__loader[data-v-af5ee551]{margin-left:32px}.face__header__actions[data-v-af5ee551]{display:flex;align-items:center}.face__header__actions button[data-v-af5ee551]{margin-left:16px}.face__photos[data-v-af5ee551]{margin-top:16px;height:100%;min-height:0;padding:0 64px}@media only screen and (max-width: 1020px){.face__photos[data-v-af5ee551]{padding:0}}.empty-content-with-illustration[data-v-af5ee551] .empty-content__icon{width:200px;height:200px}.empty-content-with-illustration[data-v-af5ee551] .empty-content__icon svg{width:200px;height:200px}.rename-form[data-v-af5ee551]{display:flex;flex-direction:row;align-items:center;height:70px;padding:16px}.rename-form input[data-v-af5ee551]{width:100%}")),document.head.appendChild(e)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
import{A as a,x as n,B as l,D as c,C as r,o as d,f as s}from"./index-BYQN7aMH.chunk.mjs";import{A as f}from"./AlertCircle-C9O0OOaX.chunk.mjs";import{S as h}from"./Star-CxLHD1v4.chunk.mjs";import{D as p}from"./Download-C4od6XjR.chunk.mjs";import{A as u}from"./ArrowLeft-GsIPVf1a.chunk.mjs";import{A as m,F}from"./FaceMergeForm-CqOEmcKp.chunk.mjs";import{V as v}from"./vue.runtime.esm-K-L1yEsQ.chunk.mjs";import{N as g}from"./NcEmptyContent-BG0fUoqQ.chunk.mjs";import{F as _}from"./FetchFilesMixin-L5phQwy1.chunk.mjs";import{F as w,a as C}from"./FilesListViewer-CASfW7KC.chunk.mjs";import{F as y}from"./File-BXkbD6Ma.chunk.mjs";import{F as M}from"./FaceCover-DkZRMyvw.chunk.mjs";import{n as A}from"./index-Dq3i_7qQ.chunk.mjs";import"./PhotoSearch-CUbV2h7p.chunk.mjs";import"./AbortControllerMixin-DeafVJKx.chunk.mjs";import"./fileFetcher-BcxeSOR-.chunk.mjs";import"./Video-BjYDux14.chunk.mjs";const S={name:"UnassignedFaces",components:{Star:h,Download:p,AlertCircle:f,ArrowLeft:u,FaceMergeForm:F,FilesListViewer:C,File:y,NcLoadingIcon:d,NcEmptyContent:g,NcActions:r,NcActionButton:c,NcDialog:l,AccountSwitch:m},directives:{focus(e){v.nextTick(()=>e.focus())}},mixins:[M,_,w],data(){return{showMoveModal:!1,loadingCount:0,appContent:document.getElementById("app-content-vue")}},computed:{...n(["files","unassignedFiles"]),faceFileIds(){return this.unassignedFiles||[]},shouldFavoriteSelection(){return this.selectedFileIds.some(e=>this.$store.state.files.files[e].favorite===0)}},mounted(){this.fetchUnassignedFaces()},methods:{...a(["appendFiles","deleteFace","renameFace","downloadFiles","toggleFavoriteForFiles","removeFilesFromFace","moveFilesToFace"]),openViewer(e){const o=this.files[e];OCA.Viewer.open({path:"/"+o.filename.split("/").slice(3).join("/"),list:this.faceFileIds.map(t=>({...this.files[t],filename:"/"+this.files[t].filename.split("/").slice(3).join("/")})),loadMore:o.loadMore?async()=>await o.loadMore(!0):()=>[],canLoop:o.canLoop})},async handleMove(e,o){try{this.loadingCount++,await this.moveFilesToFace({oldFace:null,faceName:e,fileIdsToMove:o}),this.showMoveModal=!1}catch(t){s.error(t)}finally{this.loadingCount--}},async favoriteSelection(){try{this.loadingCount++,await this.toggleFavoriteForFiles({fileIds:this.selectedFileIds,favoriteState:!0})}catch(e){s.error(e)}finally{this.loadingCount--}},async unFavoriteSelection(){try{this.loadingCount++,await this.toggleFavoriteForFiles({fileIds:this.selectedFileIds,favoriteState:!1})}catch(e){s.error(e)}finally{this.loadingCount--}},async downloadSelection(){try{this.loadingCount++,await this.downloadFiles(this.selectedFileIds)}catch(e){s.error(e)}finally{this.loadingCount--}}}};var k=function(){var e=this,o=e._self._c;return e.errorFetchingFiles?o("NcEmptyContent",{scopedSlots:e._u([{key:"icon",fn:function(){return[o("AlertCircle")]},proxy:!0}],null,!1,794036927)},[e._v(" "+e._s(e.t("photos","An error occurred"))+" ")]):o("div",{staticClass:"face"},[o("div",{staticClass:"face__header"},[o("div",{staticClass:"face__header__left"},[o("NcActions",[o("NcActionButton",{on:{click:function(t){return e.$router.push("/faces/")}},scopedSlots:e._u([{key:"icon",fn:function(){return[o("ArrowLeft")]},proxy:!0}])},[e._v(e._s(e.t("photos","Back"))+" ")])],1),o("div",{staticClass:"face__header__title"},[o("h2",{class:{"face-name":!0}},[e._v(" "+e._s(e.t("photos","Unassigned faces"))+" ")])]),e.loadingCount>0||e.loadingFaces?o("NcLoadingIcon"):e._e()],1),o("div",{staticClass:"face__header__actions"},[o("NcActions",{attrs:{"force-menu":!0}},[e.selectedFileIds.length?[o("NcActionButton",{attrs:{"close-after-click":!0,"aria-label":e.t("photos","Download selected files")},on:{click:e.downloadSelection}},[o("Download",{attrs:{slot:"icon"},slot:"icon"}),e._v(" "+e._s(e.t("photos","Download selected photos"))+" ")],1),e.shouldFavoriteSelection?o("NcActionButton",{attrs:{"close-after-click":!0,"aria-label":e.t("photos","Mark selection as favorite")},on:{click:e.favoriteSelection}},[o("Star",{attrs:{slot:"icon"},slot:"icon"}),e._v(" "+e._s(e.t("photos","Favorite"))+" ")],1):o("NcActionButton",{attrs:{"close-after-click":!0,"aria-label":e.t("photos","Remove selection from favorites")},on:{click:e.unFavoriteSelection}},[o("Star",{attrs:{slot:"icon"},slot:"icon"}),e._v(" "+e._s(e.t("photos","Remove from favorites"))+" ")],1),o("NcActionButton",{attrs:{"close-after-click":!0},on:{click:function(t){e.showMoveModal=!0}},scopedSlots:e._u([{key:"icon",fn:function(){return[o("AccountSwitch")]},proxy:!0}],null,!1,2937983280)},[e._v(" "+e._s(e.n("photos","Move photo to a different person","Move photos to a different person",e.selectedFileIds.length))+" ")])]:e._e()],2)],1)]),o("FilesListViewer",{staticClass:"face__photos",attrs:{"container-element":e.appContent,"file-ids":e.faceFileIds,loading:e.loadingFiles||e.loadingFaces},scopedSlots:e._u([{key:"default",fn:function({file:t,distance:i}){return o("File",{attrs:{file:e.files[t.id],"allow-selection":!0,selected:e.selection[t.id]===!0,distance:i},on:{click:e.openViewer,"select-toggled":e.onFileSelectToggle}})}}])}),e.showMoveModal?o("NcDialog",{attrs:{name:e.t("photos","Move to different person"),"close-on-click-outside":"",size:"normal"},on:{closing:function(t){e.showMoveModal=!1}}},[o("FaceMergeForm",{attrs:{"first-face":"-1"},on:{select:function(t){return e.handleMove(t,e.selectedFileIds)}}})],1):e._e()],1)},N=[],I=A(S,k,N,!1,null,"af5ee551");const J=I.exports;export{J as default};
//# sourceMappingURL=UnassignedFaces-24ZYb6Lf.chunk.mjs.map
