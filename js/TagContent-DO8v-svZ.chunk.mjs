(function(){"use strict";try{if(typeof document<"u"){var a=document.createElement("style");a.appendChild(document.createTextNode(".loader[data-v-29375ea7]{margin-top:30vh}.photos-navigation[data-v-29375ea7]{display:flex;height:44px;padding:0 40px;align-items:center;max-width:100%}.photos-navigation h2[data-v-29375ea7]{padding:0;margin:0}.heading-subline[data-v-29375ea7]{margin-left:85px;margin-top:-11px;color:var(--color-text-maxcontrast)}.tag__photos[data-v-29375ea7]{padding:0 64px}")),document.head.appendChild(a)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
import{x as i,o as a,D as n,C as r,a as l}from"./index-CYNaqKNs.chunk.mjs";import{A as c}from"./ArrowLeft-DiWsGsl6.chunk.mjs";import"./vue.runtime.esm-Cvc35Ey2.chunk.mjs";import{N as h}from"./NcEmptyContent-D1s5wRoX.chunk.mjs";import{F as p}from"./File-Cvym3RbQ.chunk.mjs";import{F as d,a as g}from"./FilesListViewer-CuvsdS1s.chunk.mjs";import{A as f}from"./AbortControllerMixin-DeafVJKx.chunk.mjs";import{n as m}from"./index-Y-UlKA14.chunk.mjs";import"./Video-BMa4IOkQ.chunk.mjs";import"./fileFetcher-DueDmSo0.chunk.mjs";const u={name:"TagContent",components:{File:p,FilesListViewer:g,NcEmptyContent:h,NcActions:r,NcActionButton:n,NcLoadingIcon:a,ArrowLeft:c},mixins:[d,f],props:{path:{type:String,default:""}},setup(){return{isMobile:l()}},data(){return{error:null,loading:!1,appContent:document.getElementById("app-content-vue")}},computed:{...i(["files","tags","tagsNames"]),tagId(){return this.$store.getters.tagId(this.path)},tag(){return this.tags[this.tagId]},fileIds(){return this.tag?.files??[]},isEmpty(){return this.fileIds.length===0}},watch:{async path(){this.fetchContent()}},async beforeMount(){this.fetchContent()},methods:{async fetchContent(){OCA.Viewer.close(),this.loading=!0,this.error=null;try{this.tags[this.tagId]||await this.$store.dispatch("fetchAllTags",{signal:this.abortController.signal}),this.tag&&!this.tag.files&&await this.$store.dispatch("fetchTagFiles",{id:this.tagId,signal:this.abortController.signal})}catch(t){logger.error(t),this.error=!0}finally{this.loading=!1}},openViewer(t){const e=this.files[t];OCA.Viewer.open({path:e.filename,list:this.fileIds.map(s=>this.files[s]),loadMore:e.loadMore?async()=>await e.loadMore(!0):()=>[],canLoop:e.canLoop})}}};var C=function(){var t=this,e=t._self._c;return t.error?e("NcEmptyContent",{attrs:{name:t.t("photos","An error occurred")}}):t.loading?e("NcLoadingIcon",{staticClass:"loader"}):e("div",[e("div",{staticClass:"photos-navigation"},[e("NcActions",{staticClass:"photos-navigation__back"},[e("NcActionButton",{on:{click:function(s){return t.$router.push({name:"tags"})}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArrowLeft")]},proxy:!0}])},[t._v(" "+t._s(t.t("photos","Back to tags overview"))+" ")])],1),e("h2",{staticClass:"photos-navigation__title"},[t._v(" "+t._s(t.path)+" ")])],1),e("div",{staticClass:"heading-subline"},[t._v(" "+t._s(t.n("photos","%n photo","%n photos",t.fileIds.length))+" ")]),t.isEmpty?e("NcEmptyContent",{attrs:{name:t.t("photos","No photos with this tag yet")}}):t._e(),e("FilesListViewer",{staticClass:"tag__photos",attrs:{"container-element":t.appContent,"file-ids":t.fileIds,"base-height":t.isMobile?120:200,loading:t.loading},scopedSlots:t._u([{key:"default",fn:function({file:s,distance:o}){return e("File",{attrs:{file:t.files[s.id],"allow-selection":!0,selected:t.selection[s.id]===!0,distance:o},on:{click:t.openViewer,"select-toggled":t.onFileSelectToggle}})}}])})],1)},y=[],_=m(u,C,y,!1,null,"29375ea7");const M=_.exports;export{M as default};
//# sourceMappingURL=TagContent-DO8v-svZ.chunk.mjs.map
